@startuml A11_Lesson_Registration_DFD_NonAutomated
!define GANE_SARSON

title DFD Процесса A11 "Регистрация занятия" (Неавтоматизированная версия)\nНотация Гейна-Сарсона

' Внешние сущности
rectangle "Методист/\nАдминистратор" as User

' Процессы
rectangle "11.1\nНайти карточку\nкурсанта в\nкартотеке" as P1
rectangle "11.2\nНайти карточку\nинструктора в\nкартотеке" as P2
rectangle "11.3\nПроверить\nдоступность\nсамолета в\nжурнале полетов" as P3
rectangle "11.4\nЗаполнить бланк\nзанятия и\nвнести в журнал" as P4

' Хранилища данных (бумажные)
folder "Картотека\nкурсантов" as D1
folder "Картотека\nинструкторов" as D2
folder "Журнал\nсамолетов" as D3
folder "Журнал\nкурсов" as D4
folder "Журнал\nзанятий" as D5
folder "Архив\nизменений\nстатусов" as D6

' Потоки данных от пользователя к процессам
User --> P1 : ФИО курсанта
User --> P2 : ФИО инструктора
User --> P3 : Дата, борт.номер

' Потоки между процессами и хранилищами
P1 --> D1 : Поиск карточки\nпо ФИО
D1 --> P1 : Карточка курсанта\n(ФИО, курс, данные)

P2 --> D2 : Поиск карточки\nпо ФИО
D2 --> P2 : Карточка инструктора\n(ФИО, статус)

P3 --> D3 : Поиск записей\nна дату
D3 --> P3 : Список занятых\nсамолетов

' Потоки между процессами
P1 --> P4 : Данные курсанта
P2 --> P4 : Данные инструктора
P3 --> P4 : Подтверждение\nдоступности
User --> P4 : Название курса,\nдата, длительность,\nтема

' Проверка курса
P4 --> D4 : Поиск курса\nпо названию
D4 --> P4 : Данные курса

' Создание записи занятия
P4 --> D5 : Запись в журнал:\nкурсант, инструктор,\nкурс, самолет, дата,\nдлительность, тема,\nстатус "Запланировано"

' Создание записи изменения статуса
P4 --> D6 : Запись в архив:\nномер занятия,\nновый статус,\nдата, комментарий

' Результат пользователю
P4 --> User : Номер записи в журнале\nили отказ

note right of P3
  Методист вручную
  просматривает журнал
  полетов на указанную
  дату, чтобы убедиться,
  что самолет свободен
end note

note right of P4
  Заполнение бумажного бланка:
  1. Запись в журнал занятий
  2. Запись в архив изменений
  
  Ручная проверка:
  - Длительность указана
  - Дата корректна
  - Все поля заполнены
end note

@enduml
